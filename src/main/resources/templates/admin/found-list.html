<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>관리자 - 습득물 관리</title>
</head>
<body>
<h1>습득물 등록</h1>
<form th:action="@{/admin/found}" th:object="${foundItemForm}" method="post">
  <input type="hidden" th:field="*{handlerId}" value="3" />

  <label>물품명: <input type="text" th:field="*{itemName}" /></label><br>
  <label>버스회사: <input type="text" th:field="*{busCompany}" /></label><br>
  <label>버스번호: <input type="text" th:field="*{busNumber}" /></label><br>
  <label>습득일: <input type="date" th:field="*{foundTime}" /></label><br>
  <label>습득 장소: <input type="text" th:field="*{foundPlace}" /></label><br>
  <label>내용: <textarea th:field="*{content}"></textarea></label><br>
  <label>보관 위치: <input type="text" th:field="*{storageLocation}" /></label><br>
  <label>연락처: <input type="text" th:field="*{handlerContact}" /></label><br>
  <label>이메일: <input type="email" th:field="*{handlerEmail}" /></label><br>

  <label>처리 상태:
    <select th:field="*{status}">
      <option th:each="st : ${T(kroryi.bus2.entity.lost.FoundStatus).values()}"
              th:value="${st}" th:text="${st.displayName}">상태</option>
    </select>
  </label><br>

  <button type="submit">등록</button>
</form>

<hr>

<h2>습득물 목록</h2>
<table border="1">
  <tr>
    <th>ID</th>
    <th>물품명</th>
    <th>버스번호</th>
    <th>습득일</th>
    <th>습득 장소</th>
    <th>상태</th>
    <th>액션</th>
  </tr>
  <tr th:each="item : ${foundItems}">
    <td th:text="${item.id}"></td>
    <td>
      <a th:href="@{/admin/found/view/{id}(id=${item.id})}" th:text="${item.itemName}"></a>
    </td>
    <td th:text="${item.busNumber}"></td>
    <td th:text="${item.foundTime != null ? #temporals.format(item.foundTime, 'yyyy-MM-dd') : '없음'}"></td>
    <td th:text="${item.foundPlace}"></td>
    <td th:text="${item.statusName}"></td>
    <td>
      <form th:action="@{/admin/found/hide/{id}(id=${item.id})}" method="post" style="display:inline;">
        <button type="submit">숨김</button>
      </form>
      <form th:action="@{/admin/found/delete/{id}(id=${item.id})}" method="post" style="display:inline;">
        <button type="submit">삭제</button>
      </form>
      <form th:action="@{/admin/found/match/{foundItemId}(foundItemId=${item.id})}" method="post">
        <input type="text" name="lostItemId" placeholder="분실물 ID 입력" />
        <button type="submit" th:disabled="${item.matched}">매칭</button>
      </form>

    </td>
  </tr>
</table>

</body>
</html>
